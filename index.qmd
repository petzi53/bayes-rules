# Preface {.unnumbered}


```{r}
#| label: setup
#| results: hold
#| include: false

library(glossary)
base::source(file = "R/helper.R")
ggplot2::theme_set(ggplot2::theme_bw())
```


This Quarto book collects my personal notes, trials and exercises during reading of
"Bayes Rules! An Introduction to Applied Bayesian Modeling" by Alicia A.
Johnson, Miles Q. Ott and Mine Dogucu [@johnson2022].

::: {.callout-note style="color: blue;"}
#### This is work in progress

Finished about 19%. I am currently starting the fifth chapter.
:::



::: {.callout-warning #wrn-000-personal-learning-material}
###### This is my personal learning material 

This text is neither an accurate replication nor an authoritative textbook.

I am writing this book as a text for others to read because that forces
me to become explicit and explain all my learning outcomes more
carefully. But keep in mind that this text is not written by an
expert but by a learner.

Text passages with content I am already familiar I have skipped. Section
of the original text where I needed more in-depth knowledge I have
elaborated and added my own comments resulted from my personal research.

Again: Be warned! In spite of replicating most of the content this Quarto book
may contain many mistakes. All the misapprehensions and errors are of
course my own responsibility.
:::

## Content and Goals of this Book {.unnumbered}

### Motivation

In the 1970s, during my sociology studies, I was trained in what I now know as frequentist statistics. Although I always felt somewhat uneasy about it, I only learned about Bayesian statistics—a different approach in probability theory—a few years ago. Despite having read several books on the subject, I must confess that I still don't have a firm grasp of it. I hope that by working intensively through "Bayes' Rules!" I will gain a better understanding of this approach.

A remark in the preface supports my hope in this regard:

> Bayes Rules! shows that the Bayesian approach is, in fact, accessible to students and self-learners with basic statistics knowledge, even if they are not adept at calculus derivations or coding up fancy algorithms from scratch. (XV)

I ​have already read "Bayes' Rules!" once. It was a somewhat superficial read-through, but I realized that my difficulties began as early as the second chapter. Hence, this more elaborate, renewed attempt. I plan not only to follow all the steps in detail but also to complete and document the exercises.

### Installation

There are several steps to get set up. Normally I wouldn't need all of them, because I have already worked on bayesian models. Even if I have on my system (macOS) most of the necessary packages installed, I need to install them again as I am using {**renv**}, a package to create **r**eproducible **env**ironments. I will write the complete list for readers of my notes down and select check boxes with entries I didn't need to install. 

#### Download Programs

:::::{.my-resource}
:::{.my-resource-header}
:::::: {#lem-000-install-programs}
: Download R and RStudio / Positron
::::::
:::
::::{.my-resource-container}

The first step is to download the most recent versions of the following software:

- [ ] R (<https://www.r-project.org/>)
- [ ] RStudio (<https://rstudio.com/products/rstudio/download/>) or Positron (<https://positron.posit.co/download.html>)
    
::::
:::::



Every chapter of this books has a [session information](https://sessioninfo.r-lib.org/) where you can find details of my installation for the current chapter. There you will find the used packages with their version number but also information about my system configuration (such as the operating system, R version etc.).

There is one exception with this preface chapter: It shows all installed packages used for this book and not only the package needed for the preface. 

#### Install {**rstan**}


On of the most important packages for Bayesian Data Analysis is {**rstan**}. It is the R interface to [Stan](https://mc-stan.org/), a program that "enables sophisticated statistical modeling using Bayesian inference, allowing for more accurate and interpretable results in complex data scenarios."

The installation process is pretty complex and I wonder that "Bayes rules!" didn't comment in detail the general procedure and all the things that can go wrong. In chapter 6, where {**rstan**} is used the first time is just says:

> But first, load some packages that we’ll be utilizing throughout the remainder of this chapter (and book). Among these, rstan is quite unique, thus be sure to revisit the Preface for directions on installing this package. (p.128)

But in the preface there is just one sentence to direct the user to the original [https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started](https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started). 

::: {.callout-warning #wrn-000-rstan-version}

I noticed today (2025-12-27) that the latest update of the web page was on June 3, 2024 referencing the Latest Development Version: 2.35.x (unreleased). This was later than the publication date of "Bayes Rules!" (2021-12-01) but still the text is already outdated as the several newer used version, the latest 2.36.0.9000 from Dec. 24, 2024. Furthermore believed that the recommendation of [RStan Getting Started Website](https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started) could be problematic for two reasons:

- It references [R-universe.dev](https://r-universe.dev/), a platform developed by [rOpenSci](https://ropensci.org/) to improve the publication and discovery of research software in R. On <https://stan-dev.r-universe.dev/builds> you will find not only the latest version of {**rstan**}, but also the current builds of other packages related with {**rstan**}. If you follow the suggestion of the book to get {**rstan**} via `r-universe.dev` but downloaded the other packages via CRAN, I am not sure if all the CRAN versions are compatible.
- I believe that the latest build of {**rstan**} three days ago from 2025-12-24 (today, as I am writing this is December, 27 2025) is a source file that needs to compiled. Building from source requires more effort and technical expertise. It necessitates installing development tools such as compilers and build utilities. You can check if you are prepared to compile source file, by writing in the console `pkgbuild::check_build_tools()`. The answer should be "Your system is ready to build packages!". But even if all the tools are already installed, you would need to manage dependencies manually, and you are still not immune against potential compilation errors.

:::

My suggestion is to try the latest compiled CRAN version 2.32.7 because I assume that the differences are either minor or cutting edge and therefore not necessary important for beginners of the Bayesian approach. Additionally is the book older as the [latest CRAN version](https://cran.r-project.org/web/packages/rstan/index.html) of {**rstan**} from 2025-03-10. (Unfortunately there is no information which R and package versions the book uses. The GitHub link from the online book is broken and session information is also missing.)


:::::{.my-resource}
:::{.my-resource-header}
:::::: {#lem-000-download-rstan}
: Install {**rstan**}
::::::
:::
::::{.my-resource-container}

- [ ] Install the compiled {**rstan**} package from CRAN (2.32.7):

<center>**Run this code chunk manually if the file(s) still needs to be downloaded.**</center>

```{r}
#| label: download-rstan
#| eval: false

# run the next line if you already have rstan installed
remove.packages(c("StanHeaders", "rstan"))

install.packages("rstan")
```



::::
:::::


If you get into troubles with installing reach out for help in an appropriate community forum. In the case of {**rstan**} you could use:

- the official Stan Forum at <https://discourse.mc-stan.org> or 
- the RStan GitHub Issues page at <https://github.com/stan-dev/rstan/issues>

or more general communities:

- Posit community at <https://forum.posit.co/>,
- StackOverflow at <https://stackoverflow.com/>,
- r/rstats subreddit on Reddit at <https://www.reddit.com/r/rstats/>

Anyway there is no time constraint as you can follow the book until the sixth chapter where {**rstan**} is used for the first time.

#### Install several other packages

You can install a set of data wrangling and Bayesian packages now or later when a `library()` directive wants to load the package.



:::::{.my-r-code}
:::{.my-r-code-header}
:::::: {#cnj-000-install-packages}
: Install R Packages
::::::
:::
::::{.my-r-code-container}

<center>**Run this code chunk manually if the file(s) still needs to be downloaded.**</center>

```{r}
#| label: install-packages
#| eval: false

# run the next line if you already have rstan installed

remove.packages(c("StanHeaders", "rstan"))
install.packages("rstan")

install.packages("rstan", repos = c('https://stan-dev.r-universe.dev', getOption("repos")))

install.packages("pak")
library(pak)
pak::pak("bbolker/glmmadmb")

# error with downloading rjag:
## > configure: error: "cannot find header file /usr/local/include/JAGS/Console.h.
## > Please use pkg-config to locate the JAGS library. See the INSTALL file for details."
# need installation first of JAGS on your system first (not an R package)

install.packages(c("bayesrules", "tidyverse", "janitor", "rstanarm",
                   "bayesplot", "tidybayes", "broom.mixed", "modelr",
                   "e1071", "forcats"), 
                 dependencies = TRUE)


## check if the installation is ok
example(stan_model, package = "rstan", run.dontrun = TRUE)   
```

::::
:::::



XXX TO BE CONTINUED


### Resources

XXX LINKS TO THE RESOURCES MENTIONED IN THE PREFACE

- Add DSLC resources
- Add https://ajohns24.github.io/454_Fall_21/index.html (and compare the solutions)

Maybe also of interest:

- https://mathcenter.oxford.emory.edu/site/math117/probSetBayesTheorem/

## Text passages

### Quotes and personal comments

My text consists mostly of quotes from the XXX\[BOOK NAME\]. Sometimes I
have them changed slightly to adapt it to the flow of my notes. But I
have not referenced the position of the (semi)quotes in the book. As I
am generally follow the book's outline using the same text for headers,
it should be clear where to find the quotes.

This means that most of the text in this Quarto book is not mine but
comes from different resources.

My personal comments should be clear because most of the times it is a
reflection about the book and my experiences with it.

### Repetitions as an educational device {#sec-000-repetitions}

My notes about the Bayes Rules! book are full of repetitions. For me as learner these repetitions are not redundancies per se, but serve as recapitulations to strengthen my understanding. In this sense these repetitions are educational vehicles.

Sometimes the repetitions are not mine. For instance the introductory part of chapter @sec-chap-002 is an intuitive approximation developed by the authors to get an holistic intuitive understanding which is developed more in details in the following sections.

Most of *my* capitulations are provided in "Note" callouts. To understand better the different concepts and their relation to each other, I have added these callouts. These notes reflect my understanding at the time of this writing. It could therefore be the case that they contain some errors.

Additionally I have provided code listing where book figures or tables do not provide the underlying R code. (Unfortunately there is no (GitHub) access to the source code of the book.) My code does not always generate exactly the book output, but gives a general direction how to get the book results. For the generations of these code chunks I have used several times `r glossary("LLMs")`, especially [Anthropic’s](https://www.anthropic.com/) `r glossary("Claude Sonnet 4.5")` applied with the [Positron Assistant](https://positron.posit.co/assistant.html).

Because I have added many "Note" callouts, code chunks with tables and figures, my numbering is not identical with the book. Besides figures, tables, formulae my chapter section numbers conforms with the books numbering until level 3. To get a more detailed structure I might have added sub-titles of a deeper level.

### Glossary

I am using the {**glossary**} package to create links to glossary
entries.\]

:::::: my-r-code
:::: my-r-code-header
::: {#cnj-load-glossary}
: Load glossary
:::
::::

::: my-r-code-container
```{r}
#| label: load-glossary
#| lst-label: lst-preface-load-glossary
#| lst-cap: "Install and load the glossary package with the appropriate glossary.yml file"


## 1. Install the glossary package:
## https://debruine.github.io/glossary/

library(glossary)

## If you want to use my glossary.yml file:

## 1. fork my repo
##    https://github.com/petzi53/glossary-pb

## 2. Download the `glossary.yml` file from
##    https://github.com/petzi53/glossary-pb/blob/master/glossary.yml)

## 3. Store the file on your hard disk
##    and change the following path accordingly

glossary::glossary_path("../glossary-pb/glossary.yml")

```
:::
::::::

If you hover with your mouse over the double underlined links it opens
an window with the appropriate glossary text. Try this example:
`r glossary("Z-Score")`.

:::::: my-watch-out
::: my-watch-out-header
WATCH OUT! Glossary is my private learning vehicle
:::

:::: my-watch-out-container
::: {layout="[10, 30]" layout-valign="center"}
![](https://debruine.github.io/glossary/logo.png)

I have added many of the glossary entries when I was working through
other books either taking the text passage of these books I was reading
or via an internet recherche from other resources. Sometimes I have
added the source of the glossary entry as an abbreviation or as an URL.
Many definitions were provided by the KI provided within the search of
my [Brave browser](https://brave.com/).
:::
::::
::::::

If you fork the XXX: \[REPO OF THIS BOOK(URL OF THIS BOOK\] then the
glossary will not work out of the box. Load down the `glossary.yml` file
from [my glossary-pb GitHub
repo](https://github.com/petzi53/glossary-pb/blob/master/glossary.yml),
store it on your hard disk and change the path in the code chunk
@lst-preface-load-glossary accordingly.

In any case I am the only responsible person for the glossary text,
especially if I have used text from other resources wrongly. Again: The
main purpose of the glossary is to support my persponal learning
venture.

## R Code and Datasets

During coding I am following the [Tidyverse Style
Guide](https://style.tidyverse.org/). But for learning purposes I am
trying to prefix all functions with the package name in the format
<package>::<function> (e.g., `dplyr::filter()`) This is an overhead but
supports me to understand which packages is responsible for which
action.

Sometimes adding just the package name does not work. This is mostly the
case when a generic function name like `plot` is used by another package
in a more specialized manner. In this case I will try to use the
function of the package. If this doesn't work too then I have to come
back to the standard usage of `base::library(<package-name>)`.

I am using the package name also for the default installation of base R.
This wouldn't be necessary but it helps me to understand where the base
R functions come from. What follows is a list of base R packages of the
system library included into every installation and attached (opened) by
default:

-   {**base**}: The R Base Package
-   {**datsets**}: The R Datasets Package
-   {**graphics**}: The R Graphics Package
-   {**grDevices**}: The R Graphics Devices and Support for Colours and
    Fonts
-   {**methods**}: Formal Methods and Classes
-   {**stats**}: The R Stats Package
-   {**utils**}: The R Utils Package

I am not using always the exact code snippets for my replications
because I am not only replicating the code to see how it works but also
to change the values of parameters to observe their influences.

When it is clear then I will follow the advice from Hadley Wickham:

> When you call a function, you typically omit the names of data
> arguments, because they are used so commonly. If you override the
> default value of an argument, use the full name ([tidyverse style
> guide](https://style.tidyverse.org/syntax.html)).

## Annex

In some of my book notes I provide files in the annex. They contain
experiments not directly in line with the book but inspired by my
reading of the book.

Often you will also find an annex file with a standardized short
description of all my used packages, sometimes added with notes about my
personal experiences with this package. An example of the standardized
format gives you the following @sec-glossary-package.

### Glossary package {#sec-glossary-package}

:::::: my-num-packagebox
::: my-num-packagebox-header
Package Profile: glossary
:::

:::: my-num-packagebox-container
<center>{**glossary**}: [Glossaries for Markdown and Quarto
Documents](https://debruine.github.io/glossary/) [@glossary]</center>

------------------------------------------------------------------------

::: {layout="[10, 30]" layout-valign="center"}
![](include/logoi/logo-glossary-min.png){width="176"}

Add glossaries to markdown and quarto documents by tagging individual
words. Definitions can be provided inline or in a separate file.
<br/></br>\
There is a lot of necessary jargon to learn reading new books. The goal
of {**glossary**} is to provide a lightweight solution for making
glossaries in educational materials written in quarto or R Markdown.
This package provides functions to link terms in text to their
definitions in an external glossary file, as well as create a glossary
table of all linked terms at the end of a section.
:::

------------------------------------------------------------------------

In the meantime {**glossary**} is for me a very important learning
vehicle. Whenever an expression appears with a doubled underlined link I
know that I will get more information by hovering the mouse over the
underlined text.

There is a little inconvenience with abrreviation that could also be
part of another glossary entry text string (e.g.,
`r glossary("APIx", "API")` and `r glossary("Capital Income")`). My
workaround is to end the short abbreviation with an additional 'x' and
then to call the glossary with the x-version follwed by the text that
should be appear in the document (e.g., *r glossary("APIx", "API")*).
This double format is a standard feature of the {**glossary**} package
so that you can adapt the appearing text to the glossary entry (e.g.,
singular/plural or other grammar changes).
::::
::::::

## Resources

:::::: my-resource
:::: my-resource-header
::: {#lem-index-book-resources}
: Resources used for this Quarto book
:::
::::

::: my-resource-container
XXX: \[ADD HERE USED ADDITIONAL SOURCES\]
:::
::::::

## Private Functions

XXX: \[DESCRIBE PRIVATE FUNCTION USED IN THIS BOOK\]



## Glossary Entries of this Chapter

```{r}
#| label: glossary-table
#| echo: false

glossary_table()
```

------------------------------------------------------------------------

## Session Info {.unnumbered}

::::: my-r-code
::: my-r-code-header
Session Info
:::

::: my-r-code-container
```{r}
#| label: session-info

sessioninfo::session_info(pkgs = "installed")
```
:::
:::::
